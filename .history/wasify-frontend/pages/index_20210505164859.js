import Head from 'next/head'
import Image from 'next/image'
import Layout from '../components/Layout'
import { withApollo } from '../lib/withApollo'
import { useFetchUser } from '../lib/user'
import Login from "../components/Auth/Login";
import { graphql } from "react-apollo";


function Home() {
  const { user, loading } = useFetchUser()
  if (loading) {
    return <div>Loading...</div>
  }

  if (!loading && !user) {
    return (
      <Login />
    );  
  } else {
    return (
      <>
        <div>
          <Head>
            <title>Wasify</title>
            <meta name="description" content="Generated by create next app" />
            <link rel="icon" href="/favicon.ico" />
          </Head>
        </div>

        <Layout />
      </>
    )
  }
  
}

export default wiHome);
